---
# Context Metadata (YAML Format)
# Structured data for machine processing
# Paired with context.md for human-readable narrative

metadata:
  feature_name: "{{FEATURE_NAME}}"
  created: "{{CREATED_DATE}}"
  updated: "{{CREATED_DATE}}"
  status: "planning"  # planning | in_progress | testing | blocked | complete
  testing_approach: "{{TESTING_APPROACH}}"
  architecture_doc: "architecture.md"  # Reference to detailed architecture document

  # Multi-Agent Mode
  agent_coordination: false  # Set to true when using domain experts
  current_domain: null  # Current domain being worked on
  domains: []  # All domains in this feature

# Current session state
session:
  focus:
    summary: "Planning complete"
    phase: 0
    file: null
    line: null
    action: "Review spec and begin implementation"

  docker:
    rebuild_needed: false
    last_rebuild: null
    code_changes_since_rebuild: false

  git:
    branch: null
    files_modified: 0
    files_staged: 0
    files_unstaged: 0
    committed: false

# Files being worked on
files:
  active:
    # - path: "src/components/Component.tsx"
    #   purpose: "What this file does"
    #   progress: 60
    #   status: "Form rendering complete, validation in progress"

  modified_today:
    # - path: "src/lib/utils.ts"
    #   change: "Added validation function"
    #   timestamp: "2025-11-07T14:30:00"

  next_to_modify:
    # - path: "src/components/ErrorMessage.tsx"
    #   purpose: "Fix error display bug"
    #   line: 45

# Status summary
status:
  working:
    # - "Feature aspect that's complete"

  needs_work:
    # - "Feature aspect that needs completion"

  blockers:
    # - issue: "Description of blocker"
    #   since: "2025-11-07"
    #   attempted_solutions: []

# Architecture context
architecture:
  reference_doc: "architecture.md"  # Detailed architecture document

  key_decisions:
    # - "ADR-001: Decision summary"

  integration_points:
    # - system: "System name"
    #   interaction: "How we integrate"

  patterns:
    # - name: "Pattern name"
    #   usage: "How it's used in this feature"
    #   location: "path/to/example"

  related_code:
    # - path: "path/to/file"
    #   relevance: "Why it's relevant"

  tech_stack:
    framework: null
    libraries: []
    styling: null

# Gotchas and tricky areas
gotchas:
  # - area: "What's tricky"
  #   note: "What to watch out for"
  #   solution: "How to handle it"

# Multi-Agent Mode: Domain-specific context (optional)
domain_context:
  # backend:
  #   active_files: []
  #   completed_tasks: []
  #   blockers: []
  #   handoff_notes: "What frontend needs from backend"
  # frontend:
  #   active_files: []
  #   completed_tasks: []
  #   blockers: []
  #   handoff_notes: "What needs to be done next"
  # devops:
  #   active_files: []
  #   completed_tasks: []
  #   blockers: []

# For next session (structured)
next_session:
  immediate_actions:
    - priority: 1
      action: "Review spec.yml to understand requirements"
      file: ".specs/active-task/spec.yml"

    - priority: 2
      action: "Review progress.yml to see task breakdown"
      file: ".specs/active-task/progress.yml"

    - priority: 3
      action: "Begin with Phase 1, first task"

  reference_files:
    # - "path/to/file - description of relevance"

  # Multi-Agent Mode: Domain-specific next actions (optional)
  by_domain: {}
    # backend:
    #   - priority: 1
    #     action: "Complete API endpoint implementation"
    #     file: "backend/src/controllers/auth.controller.ts"
    # frontend:
    #   - priority: 1
    #     action: "Wait for backend API completion"
    #     blocked_by: ["T1"]

  docker_reminder: |
    IMPORTANT: If code changes were made, REBUILD Docker before testing.
    See CLAUDE.md "Docker Rebuild Rules (CRITICAL)" section.
    Command: docker compose up --build -d

notes:
  # - timestamp: "2025-11-07T15:00:00"
  #   note: "Important context or decision"
